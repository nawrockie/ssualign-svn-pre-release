#################################################################
# SSU-ALIGN
# src Makefile
# SVN $Id: Makefile.in 2603 2008-10-05 19:21:32Z kolbed $
#################################################################
# @LICENSE@
#################################################################

SHELL  = /bin/sh

## your compiler and compiler flags
#
CC     = @CC@
CFLAGS = @CFLAGS@

## other defined flags. 
#  DEFS contains stuff that autoconf decides on. 
#  LIBS contains system libraries that the configure script decides we need.
#
DEFS  = @DEFS@
LIBS  = @LIBS@ -lm

## archiving command, and ranlib command if you need one.
#  In general, you shouldn't need to change these, and they're
#  only used for building the testsuite anyway... e.g. we
#  make a "libinfernal.a" library for building the testsuite.
#
AR     = @AR@ rcv 
RANLIB = @RANLIB@

# configuration for optional MPI functionality
MPILIBS   = @MPILIBS@

# Where the build arena is (module .h and .o files)
#
MYLIBS   = -leasel -linfernal
MYLIBDIR = -L../easel -L../infernal/src/
MYINCDIR = -I../easel -I../infernal/src/

#PROGS = ssu-draw ssu-mask

#OBJS  = ssu-draw.o\

.c.o: 
	$(CC) $(CFLAGS) $(DEFS) $(MYINCDIR) -c $<

#################################################################
## Targets defining how to make SSU-ALIGN executables.
##
all: 	$(PROGS) 

$(PROGS): @EXEC_DEPENDENCY@ $(OBJS) ${HDRS}
	$(CC) $(CFLAGS) $(DEFS) $(MYLIBDIR) -o $@ $@.o $(OBJS) $(MYLIBS) $(LIBS) $(MPILIBS)


#################################################################
## Targets used in making SSU-ALIGN module for testsuite compilation.
##
module: libssu.a

libinfernal.a: $(OBJS) ${HDRS}
	$(AR) libssu.a $(OBJS) 
	$(RANLIB) libssu.a
	chmod 644 libssu.a


#################################################################
## Miscellaneous targets.
##
clean:
	-rm -f *.o *~ Makefile.bak core $(PROGS) TAGS gmon.out libssu.a

distclean:
	-rm -f *.o *~ Makefile.bak core $(PROGS) TAGS gmon.out libssu.a
	-rm -f Makefile config.h

TAGS:
	etags -t *.c *.h Makefile.in

